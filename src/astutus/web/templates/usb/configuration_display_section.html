
{% for device_config in device_configurations.items() %}
<div>
    <table>
        <tr>
            <td>Name</td><td>{{ device_config.name }}</td>
        </tr>
        <tr>
            <td>Device ID</td><td>{{ device_config.id }}</td>
        </tr>
        <tr>
            <td>Stylers:</td>
            <td>
                {% for styler in device_config.stylers %}
                <table>
                    {% for key, value in styler.items() %}
                        <tr><td>{{ key }}</td><td>{{ value }}</td></tr>
                    {% endfor %}
                </table>
                <hr/>
                {% endfor %}
            </td>
        </tr>
    </table>
    <form onsubmit="return deleteViaJavascript('{{ device_config.id }}' );">
        <button type="submit">Delete</button>
    </form>

    <hr/>
</div>
{% endfor %}
<script>
function deleteViaJavascript(item_id) {
    if (confirm("Are you sure you want to delete item " + item_id + "?")) {
        // Dev Note:  Javascript requires backticks for string interpolation:
        $.ajax(`/astutus/usb/configuration/${item_id}`, {
            method : 'delete',
            success: function(data, textStatus,  jqXHR) {
                if (jqXHR.status == 202) {
                    redirect_url = data["redirect_url"]
                    window.location.replace(redirect_url);
                }
            },
            error: function(xhr) {
                alert('Failed to delete item ' + item_id)
            }
        })
    }
}
</script>